<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@_whitelate_ " />
  <meta name="twitter:title" content="のびるいぬ" />
  <meta name="twitter:description" content="すっぱいぬをのばそう" />
  <meta name="twitter:image" content="https://hibikine.me/dog/dog.png" />
  <title>Document</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<style>
* {
white-space: nowrap;
}
  button {
    width: 100px;
    height: 100px;
  }
</style>
  <h1>のびるすっぱいぬ v0.0.5</h1>
  <p><span id="count-num">0</span>すっぱ = <span id="meter">0m</span></p>
<p>⊂ﾟＵ┬<span id='dog'>─</span>┬~</p>
<p>
<button onclick="suppa();">のばす</button>
</p>
  <p id="place"></p>
  <p>投稿→<a id="twitter" href="">Twitter
  </a></p>
  <form id="form" method="post" action="https://hibikine.me/dog/score.php">
    <button type="submit">送信(すっぱリセット)</button>
  </form>
  <div>
    <p>v0.0.5: タグが使われてたので修正</p>
    <p>v0.0.4: タグがふえた</p>
    <p>v0.0.3: すっぱTwitterのバグを直した</p>
    <p>v0.0.2: Twitterカード対応</p>
    <p>v0.0.1: バージョニング</p>
  </div>
  <script>
    let count = 0;

    function generateTwitterHref(count) {
      $('#twitter').attr("href", 'https://twitter.com/?status=' + encodeURIComponent('すっぱいぬを' + count + '回伸ばしました！ https://hibikine.me/dog/ #のびるすっぱいぬ'));
    }
    function suppa(){
      console.log('suppa');
      document.getElementById('dog').innerHTML += '─';
      document.getElementById('count-num').innerHTML = ++count;
      generateTwitterHref(count)
      const meter = 1 + count / 2;
      $('#meter').html(meter + 'm');
      const places = [
        {
          length: 10,
          name: 'へびすっぱいぬ'
        },
        {
          length: 100,
          name: 'へびすっぱいぬ'
        },
        {
          length: 1000,
          name: 'どらごんすっぱいぬ'
        },
        {
          length:10000,
          name: 'ゆめのなかのすっぱいぬ'
        },
        {
          length: 100000,
          name: 'いつかのすっぱいぬ'
        },
        {
          length:10000000,
          name:'すっぱいぬ…？'
        },
        {
          length:10000000000000,
          name: 'おめでとう！お前がすっぱいぬになるんだよ'
        }
      ];
      let lastPlacesIndex = 0;
      if (places[lastPlacesIndex].length <= meter) {
        $('#place').html(places[lastPlacesIndex].name);
        lastPlacesIndex++;
      }
    }
    $("#form").submit(function() {
      $("<input>",{
        type:"hidden",
        name:"score",
        value:count,
      }).appendTo("#form");
    })
    generateTwitterHref(0);
  </script>
</html>
